---
title:  "과연 docker-compose로 관리할 필요가 있을까?" 

categories:
  -  DUR
tags:
  - [DUR]

date: 2023-12-14
last_modified_at: 2023-12-14
---
# <span style="color:#ffd966">맥락</span>
프로젝트를 진행하다가, 도커 컨테이너 생성과 삭제를 자동화해야하는 태스크가 있었다. 그런데, 컨테이너가 생성될 때마다 하나의 새로운 포트를 할당해야하는 조건이 있었다. 

처음에는 개발자가 직접 도커 컴포즈 파일을 수정하고 새로운 컨테이너를 올리는 방식으로 진행할까 생각했다. 하지만 비개발자 인원이 컨테이너 생성과 삭제를 할 수 있다면 더 좋을 것 같아, 서버 A에서 운영되는 웹 페이지에서 서버 B에 쉘 스크립트로 컨테이너 관리를 하고자 했다. 

쉘 명령 만으로 컨테이너를 생성하고 삭제할 수 있는데, 쉘 명령으로 도커 컴포즈 파일을 수정하여 컨테이너를 관리한다면  이점과 단점이 무엇인지 고민이었다.  

# <span style="color:#ffd966">고민</span>
과연 docker-compose로 관리할 필요가 있을까?

# <span style="color:#ffd966">시도해 본 것</span>
docker-compose.yml 수정 후 docker-compose up
1. service 추가 후 docker-compose up  
  기존 컨테이너 중지 없이 새로운 컨테이너가 생성된다. 
2. service 삭제 후 docker-compose up  
  삭제했던 service 로 동작하는 컨테이너는 종료되지 않았다. 

# <span style="color:#ffd966">결론</span>
이점. 
1. 컨테이너를 문서화하여 관리할 수 있다. 

단점. 
1. 쉘로 텍스트 편집을 해야하는 번거로움이 있다. 
2. 컨테이너 삭제 시에는 1번의 과정 후 따로 쉘 명령으로 컨테이너를 삭제해야한다. 

나의 국그릇 같은 지식으로 결론을 내려보자면,
도커 컴포즈를 쓰지 말자!